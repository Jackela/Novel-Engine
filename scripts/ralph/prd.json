{
  "project": "Novel-Engine-UI-Rescue",
  "branchName": "feat/domain-and-fortification",
  "description": "Fixing the broken UI (404s), optimizing test execution (hanging browsers), and preparing the Mock infrastructure.",
  "techContext": {
    "stack": "React + Vite + shadcn/ui + Playwright",
    "testCommand": "npm run test:e2e",
    "e2eConfig": "playwright.config.ts"
  },
  "userStories": [
    {
      "id": "UI-FIX-001",
      "title": "Router & Page Audit",
      "description": "The app has blank pages. Audit the Router and delete dead code.",
      "acceptanceCriteria": [
        "Audit `App.tsx`: Identify all routes.",
        "Manual Check Logic: If a route points to a component that renders nothing or errors, FIX it or DELETE the route.",
        "Ensure the Root Route `/` redirects to a valid Dashboard or Home (not blank).",
        "Verification: `npm run test:e2e` (navigation tests) must pass and NOT be empty."
      ],
      "priority": 1,
      "passes": true,
      "effort": "medium"
    },
    {
      "id": "TEST-FIX-001",
      "title": "Fix Hanging Playwright Browsers",
      "description": "Tests leave Chrome instances open, blocking the dev loop.",
      "acceptanceCriteria": [
        "Modify `playwright.config.ts`: Ensure `headless: true` is default for CI/Ralph runs.",
        "Add `Global Teardown`: Ensure contexts are closed after tests.",
        "Verification: Run `npm run test:e2e` twice in a row. It should not fail due to 'port in use' or locked files."
      ],
      "priority": 2,
      "passes": true,
      "effort": "low"
    },
    {
      "id": "MOCK-001",
      "title": "LLM Mock Infrastructure",
      "description": "Prepare for Narrative dev by mocking the expensive LLM calls in E2E.",
      "acceptanceCriteria": [
        "Create `tests/mocks/llm_handlers.ts`: A mock server (or Playwright `page.route`) that intercepts `POST /api/generate`.",
        "Return dummy JSON instantly instead of calling OpenAI/Claude.",
        "Enable this mock ONLY when `MOCK_LLM=true` env var is set.",
        "Verification: Run a generation test with MOCK_LLM=true and assert it finishes in <2 seconds."
      ],
      "priority": 3,
      "passes": false,
      "effort": "medium"
    }
  ]
}