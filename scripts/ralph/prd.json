{
  "project": "Novel-Engine-Visual-Rescue",
  "branchName": "feat/character-evolution",
  "description": "Full UI refactor implementing DESIGN_SYSTEM.md constraints and orthogonal theme architecture",
  "techContext": {
    "stack": "React + Tailwind + shadcn/ui + Tiptap + React Flow",
    "testCommand": "npm run test:e2e",
    "conventions": "MUST read DESIGN_SYSTEM.md and CONVENTIONS.md before coding"
  },
  "userStories": [
    {
      "id": "VIS-001",
      "title": "Setup Design Tokens and Font System",
      "description": "Extend Tailwind configuration with Lora font and literary theme tokens",
      "acceptanceCriteria": [
        "index.html loads Lora font (400/500/600 + italic)",
        "tailwind.config.js defines fontFamily.serif with Lora",
        "tailwind.css defines --paper, --ink, --accent-literary CSS variables",
        "[data-typography='literary'] selector correctly overrides editor styles",
        "dark mode + literary has distinct warm dark tones"
      ],
      "priority": 1,
      "passes": true,
      "effort": "medium"
    },
    {
      "id": "VIS-002",
      "title": "Refactor Component Directory Structure",
      "description": "Create composed/ directory, rename AppLayoutâ†’AppShell, delete duplicate components",
      "acceptanceCriteria": [
        "Create frontend/src/components/composed/ directory",
        "Move and rename AppLayout.tsx to composed/AppShell.tsx",
        "Update ProtectedLayout.tsx import path",
        "Delete components/graph/nodes/CharacterNode.tsx (duplicate)",
        "All CharacterNode imports point to features/weaver version",
        "npm run type-check passes"
      ],
      "priority": 2,
      "passes": false,
      "effort": "medium"
    },
    {
      "id": "VIS-003",
      "title": "Create Editor Typography System",
      "description": "Implement Editor Canvas domain literary typography",
      "acceptanceCriteria": [
        "Create frontend/src/styles/editor.css",
        "Import editor.css in main.tsx",
        "EditorComponent uses .prose-editor class",
        "max-width: 65ch, line-height: 1.75 in literary mode",
        "ProseMirror placeholder styles work correctly",
        "character-mention has distinct literary mode styling"
      ],
      "priority": 3,
      "passes": false,
      "effort": "medium"
    },
    {
      "id": "VIS-004",
      "title": "Enhance Weaver Node Styling",
      "description": "Unify Graph Canvas visual style",
      "acceptanceCriteria": [
        "CharacterNode uses data-node-type attribute for type identification",
        "Node status classes (idle/active/loading/error) produce consistent visuals",
        "Glow effects use CSS variables for theming",
        "Nodes have correct contrast in dark mode"
      ],
      "priority": 4,
      "passes": false,
      "effort": "low"
    },
    {
      "id": "VIS-005",
      "title": "Implement Typography Mode Switcher",
      "description": "Add default/literary toggle to TopBar",
      "acceptanceCriteria": [
        "Create TypographyToggle.tsx component",
        "Integrate into TopBar.tsx right-side actions",
        "Toggle sets data-typography attribute on html element",
        "Preference persists to localStorage",
        "Icons correctly reflect current mode (Type/BookOpen)"
      ],
      "priority": 5,
      "passes": false,
      "effort": "low"
    },
    {
      "id": "VIS-006",
      "title": "Visual Regression Testing Baseline",
      "description": "Create visual regression tests for all 4 theme combinations",
      "acceptanceCriteria": [
        "Create frontend/tests/e2e/visual-regression.spec.ts",
        "Test captures baseline for light+default theme",
        "Test captures baseline for light+literary theme",
        "Test captures baseline for dark+default theme",
        "Test captures baseline for dark+literary theme",
        "All tests pass with npm run test:e2e"
      ],
      "priority": 6,
      "passes": false,
      "effort": "medium"
    }
  ]
}
