# ğŸš¨ å®é™…UATæµ‹è¯•ç»“æœ - å‘ç°ä¸¥é‡é—®é¢˜

## æµ‹è¯•æ‰§è¡Œæ—¶é—´
**å¼€å§‹æ—¶é—´**: 2025å¹´7æœˆ30æ—¥ 18:13  
**æµ‹è¯•ç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒ (localhost:5173 + localhost:8000)

---

## âŒ å…³é”®å‘ç°ï¼šç³»ç»Ÿå­˜åœ¨ä¸¥é‡é—®é¢˜

### 1. æµ‹è¯•å¤±è´¥æƒ…å†µ
- **æµ‹è¯•æ‰§è¡Œç»“æœ**: å¤§é‡å¤±è´¥ (çº¦24/54ä¸ªæµ‹è¯•å¤±è´¥)
- **ä¸»è¦å¤±è´¥åŸå› **: é¡µé¢æ— æ³•æ­£å¸¸åŠ è½½è§’è‰²æ•°æ®
- **å¤±è´¥æˆªå›¾æ˜¾ç¤º**: é¡µé¢å‘ˆç°ç©ºç™½çŠ¶æ€

### 2. åç«¯APIçŠ¶æ€ âœ…
```bash
curl http://localhost:8000/characters
# å“åº”æ­£å¸¸: {"characters":["cors_test_char","isabella_varr","krieg","ork","test"]}

curl http://localhost:8000/health  
# å“åº”æ­£å¸¸: {"status":"healthy","api":"running","timestamp":"2025-07-30 18:18:09,139","version":"1.0.0","config":"loaded"}
```

### 3. å‰ç«¯æœåŠ¡çŠ¶æ€ âš ï¸
- **HTMLåŠ è½½**: æ­£å¸¸ (è¿”å›åŸºç¡€HTMLç»“æ„)
- **è·¯ç”±é…ç½®**: å­˜åœ¨é—®é¢˜
- **é¡µé¢æ¸²æŸ“**: å¤±è´¥ (æ˜¾ç¤ºç©ºç™½)

---

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
1. **è·¯ç”±é…ç½®é—®é¢˜**: æµ‹è¯•ç›´æ¥è®¿é—®`/character-selection`ï¼Œä½†å¯èƒ½å­˜åœ¨è·¯ç”±åŒ¹é…é—®é¢˜
2. **å‰åç«¯è¿æ¥é—®é¢˜**: å‰ç«¯æ— æ³•æ­£ç¡®è·å–åç«¯æ•°æ®
3. **ç»„ä»¶æ¸²æŸ“é—®é¢˜**: CharacterSelectionç»„ä»¶å¯èƒ½å­˜åœ¨é€»è¾‘é”™è¯¯

### æµ‹è¯•å¤±è´¥è¯¦æƒ…
æ ¹æ®æµ‹è¯•ç»“æœï¼Œä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å¤±è´¥ï¼š
- âŒ APIè°ƒç”¨æ£€æµ‹
- âŒ è§’è‰²å¡ç‰‡æ˜¾ç¤º  
- âŒ åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âŒ é”™è¯¯å¤„ç†
- âŒ ç”¨æˆ·äº¤äº’åŠŸèƒ½

---

## ğŸš« UATæµ‹è¯•ç»“è®º

### ç³»ç»Ÿå¯ç”¨æ€§è¯„ä¼°: **ä¸åˆæ ¼**

**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ **é˜»å¡çº§**
- æ ¸å¿ƒåŠŸèƒ½å®Œå…¨æ— æ³•ä½¿ç”¨
- ç”¨æˆ·æ— æ³•è¿›è¡Œä»»ä½•æœ‰æ„ä¹‰çš„æ“ä½œ
- ç³»ç»ŸåŸºæœ¬ä¸å¯ç”¨

### ç”¨æˆ·ä½“éªŒè¯„ä¼°: **å®Œå…¨å¤±è´¥**
- é¡µé¢ç©ºç™½ï¼Œæ— ä»»ä½•å†…å®¹æ˜¾ç¤º
- æ— æ³•å®ŒæˆåŸºæœ¬çš„è§’è‰²é€‰æ‹©æ“ä½œ
- ç³»ç»Ÿå“åº”æ€§ä¸ºé›¶

### è´¨é‡é—¨ç¦çŠ¶æ€: **æœªé€šè¿‡**
- âŒ åŠŸèƒ½å®Œæ•´æ€§: 0% (æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨)
- âŒ ç³»ç»Ÿå¯ç”¨æ€§: 0% (é¡µé¢æ— æ³•æ­£å¸¸åŠ è½½)
- âŒ ç”¨æˆ·å¯æ¥å—æ€§: 0% (å®Œå…¨ä¸å¯ç”¨)

---

## ğŸ“‹ å¿…é¡»è§£å†³çš„é—®é¢˜æ¸…å•

### P0 - é˜»å¡çº§é—®é¢˜ (å¿…é¡»ç«‹å³ä¿®å¤)
1. **é¡µé¢ç©ºç™½é—®é¢˜**: è§’è‰²é€‰æ‹©é¡µé¢æ— æ³•æ˜¾ç¤ºä»»ä½•å†…å®¹
2. **APIè¿æ¥é—®é¢˜**: å‰ç«¯æ— æ³•è·å–åç«¯è§’è‰²æ•°æ®
3. **è·¯ç”±é—®é¢˜**: é¡µé¢è·¯ç”±å¯èƒ½å­˜åœ¨é…ç½®é”™è¯¯
4. **ç»„ä»¶æ¸²æŸ“é—®é¢˜**: Reactç»„ä»¶æ— æ³•æ­£å¸¸æ¸²æŸ“

### P1 - ä¸¥é‡é—®é¢˜
1. **æµ‹è¯•ç¯å¢ƒé—®é¢˜**: å¤§é‡æµ‹è¯•ç”¨ä¾‹å¤±è´¥
2. **é”™è¯¯å¤„ç†ç¼ºå¤±**: æ²¡æœ‰æœ‰æ•ˆçš„é”™è¯¯æç¤º
3. **åŠ è½½çŠ¶æ€é—®é¢˜**: åŠ è½½åŠ¨ç”»ä¸æ˜¾ç¤º

---

## ğŸš¨ UATæµ‹è¯•çŠ¶æ€

**å½“å‰çŠ¶æ€**: **æš‚åœ - ç³»ç»Ÿä¸å¯ç”¨**

**å»ºè®®è¡ŒåŠ¨**:
1. **ç«‹å³åœæ­¢UAT**: å½“å‰ç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨ï¼Œç»§ç»­æµ‹è¯•æ— æ„ä¹‰
2. **ç´§æ€¥ä¿®å¤**: å¼€å‘å›¢é˜Ÿéœ€è¦ç«‹å³ä¿®å¤æ ¸å¿ƒé—®é¢˜
3. **é‡æ–°éªŒè¯**: ä¿®å¤åéœ€è¦å®Œæ•´çš„å†’çƒŸæµ‹è¯•
4. **é‡æ–°å¼€å§‹UAT**: ç¡®è®¤ç³»ç»ŸåŸºæœ¬å¯ç”¨åé‡æ–°è¿›è¡ŒUAT

**é£é™©è¯„ä¼°**: ğŸ”´ **æé«˜é£é™©**
- ç³»ç»Ÿå®Œå…¨æ— æ³•ä½¿ç”¨
- å¦‚æœéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå°†å¯¼è‡´ä¸¥é‡äº‹æ•…
- ç”¨æˆ·ä½“éªŒå®Œå…¨ä¸å¯æ¥å—

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ (ä»Šå¤©å†…)
1. **é—®é¢˜è¯Šæ–­**: è¯¦ç»†åˆ†æé¡µé¢ç©ºç™½çš„æ ¹æœ¬åŸå› 
2. **ç´§æ€¥ä¿®å¤**: ä¿®å¤é˜»å¡çº§é—®é¢˜
3. **åŸºç¡€éªŒè¯**: ç¡®ä¿é¡µé¢èƒ½æ­£å¸¸æ˜¾ç¤º
4. **APIè¿æ¥ä¿®å¤**: ç¡®ä¿å‰åç«¯æ­£å¸¸é€šä¿¡

### åç»­è¡ŒåŠ¨ (ä¿®å¤å®Œæˆå)
1. **å†’çƒŸæµ‹è¯•**: éªŒè¯åŸºæœ¬åŠŸèƒ½å¯ç”¨
2. **é‡æ–°æ‰§è¡ŒUAT**: ä»å¤´å¼€å§‹å®Œæ•´çš„UATæµç¨‹
3. **è´¨é‡æŠŠå…³**: ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## æ€»ç»“

**âŒ å½“å‰ç³»ç»Ÿå®Œå…¨ä¸ç¬¦åˆUATæ ‡å‡†ï¼Œæ— æ³•ç»§ç»­æµ‹è¯•**

è¿™æ¬¡å®é™…æµ‹è¯•æš´éœ²äº†ç³»ç»Ÿçš„ä¸¥é‡é—®é¢˜ï¼Œè¯æ˜äº†çœŸå®UATæµ‹è¯•çš„é‡è¦æ€§ã€‚å¦‚æœæ²¡æœ‰è¿›è¡Œå®é™…æµ‹è¯•ï¼Œè¿™äº›é—®é¢˜å°†ä¼šç›´æ¥å½±å“ç”Ÿäº§ç¯å¢ƒã€‚

**å»ºè®®**: ç«‹å³ä¿®å¤ç³»ç»Ÿé—®é¢˜ï¼Œç¡®ä¿åŸºæœ¬å¯ç”¨æ€§åé‡æ–°å¼€å§‹UATæµç¨‹ã€‚

---

## âœ… 2025-11-13 Flow-based Dashboard å›å½’è®°å½•

**æ‰§è¡Œäºº**: Platform QA  
**ç¯å¢ƒ**:
- å¼€å‘æœåŠ¡ç»Ÿä¸€é€šè¿‡ `npm run dev:daemon`ï¼ˆå°è£… `scripts/dev_env.sh start --detach`ï¼‰å¯åŠ¨ï¼›`npm run dev:stop` æ¸…ç†é—ç•™è¿›ç¨‹  
- æ‰€æœ‰ Playwright/UAT å‘½ä»¤å‡è®¾ç½® `SKIP_DASHBOARD_VERIFY=true PLAYWRIGHT_BASE_URL=http://127.0.0.1:3000`
- æ—¥å¿—ä½ç½®ï¼š`tmp/dev_env/backend.log` / `tmp/dev_env/frontend.log`

### è‡ªåŠ¨åŒ–ç»“æœæ¦‚è§ˆ
| å¥—ä»¶ | å‘½ä»¤ | ç»“æœ | å¤‡æ³¨ |
| --- | --- | --- | --- |
| Core UAT (æ¡Œé¢) | `npx playwright test tests/e2e/dashboard-core-uat.spec.ts --project=chromium-desktop` | âœ… é€šè¿‡ | Flow-based æ§åˆ¶åŒº + pipeline æŒ‡æ ‡å…¨éƒ¨éªŒè¯ï¼Œæœ€ç»ˆæˆªå›¾ä¿å­˜åœ¨ `frontend/test-results/â€¦` |
| Accessibility | `npx playwright test tests/e2e/accessibility.spec.ts --project=chromium-desktop` | âœ… é€šè¿‡ | Keyboard-only æ—…ç¨‹ã€å¯è§ç„¦ç‚¹ä¸ live region éªŒè¯é€šè¿‡ |
| Extended UAT | `npx playwright test tests/e2e/dashboard-extended-uat.spec.ts --project=chromium-desktop` | âš ï¸ ä»å¤±è´¥ | Phase 2/3/5/6 ä¾èµ–çœŸå®ç½‘ç»œ/å¤šè§’è‰²ç¼–æ’ï¼Œå½“å‰ mock æ•°æ®ç¼ºå¤±å¯¼è‡´æ–­è¨€å¤±è´¥ |
| Vitest | `npm test -- --run` | âœ… é€šè¿‡ | ä»æœ‰ `tests/workflows.test.tsx` çš„ duplicate key warningï¼ˆéœ€åç»­ä¿®å¤ï¼‰ |
| Lint/Type Check | `npm run lint` / `npm run type-check` | âœ… é€šè¿‡ | ä»…ä¿ç•™ `CharacterCreationDialog` çš„æ—¢æœ‰ `autoFocus` è­¦å‘Š |
| Backend slices | `pytest tests/test_security_framework.py tests/test_quality_framework.py` | âœ… é€šè¿‡ | ä»æœ‰ asyncio/Deprecation warningï¼ŒåŠŸèƒ½å…¨éƒ¨ç»¿ç¯ |
| `scripts/validate_ci_locally.sh` | `bash scripts/validate_ci_locally.sh` | âŒ Formatter é˜¶æ®µå¤±è´¥ | Black/Isort éœ€è¦ä¸€æ¬¡æ€§æ ¼å¼åŒ– 40+ legacy æ–‡ä»¶ï¼ˆè¯¦è§ `tmp/validate-ci.log`ï¼‰ |

### è§†è§‰è¯æ®ï¼ˆæœ€æ–°æµå¼ä»ªè¡¨ç›˜ï¼‰

![Flow dashboard](../../assets/dashboard/dashboard-flow-2025-11-12.png)

> Summary/Control/Pipeline/Streams/Signals/Persona/Insights å„åŒºåŸŸåˆ†åˆ«é€šè¿‡ `data-role="summary-strip|control-cluster|pipeline-monitor|stream-feed|system-signals|persona-ops|analytics-insights"` æš´éœ²è¯­ä¹‰æ ‡è®°ï¼ŒPlaywright ä¸ AI è‡ªåŠ¨åŒ–å¯ç¨³å®šå®šä½è¿™äº›å®¹å™¨ã€‚

### act ä»¿çœŸ CI çŠ¶æ€
- `act -W .github/workflows/frontend-ci.yml -j build-and-test`ï¼šä»åœ¨ `actions/setup-node@v4` é˜¶æ®µå¤±è´¥ï¼Œå› ä¸º workflow å°è¯•ç¼“å­˜ `frontend/package-lock.json`â€”â€”ä»“åº“å¹¶æœªæäº¤è¯¥æ–‡ä»¶ï¼Œ`act` æ— æ³•è§£æè·¯å¾„ã€‚éœ€è¦è°ƒæ•´ workflow cache é…ç½®æˆ–æäº¤é”æ–‡ä»¶ã€‚
- `act -W .github/workflows/ci.yml -j tests`ï¼špytest åœ¨æ”¶é›†é˜¶æ®µæŠ›å‡º `ModuleNotFoundError: src.core.types.shared_types`ã€‚å³ä½¿è·³è¿‡è¯¥é—®é¢˜ï¼Œåç»­ security/orchestrator æµ‹è¯•ä»æŒ‰ç…§ `tmp/validate-ci.log` æç¤ºå¤±è´¥ï¼ˆæœªæ¢å¤ `_initialize_archetype_templates`ã€æ—§ç‰ˆ rate limiter é…ç½®ç­‰ï¼‰ã€‚

### å¾…è§£å†³äº‹é¡¹
1. **Formatter å¤§æ¸…ç†**ï¼š`scripts/validate_ci_locally.sh` åœ¨ Black/Isort é˜¶æ®µå³å¤±è´¥ï¼ˆé¦–æ‰¹æ–‡ä»¶ï¼š`scripts/reporting/cache_savings_report.py`ã€`src/api/main_api_server.py`ã€`tests/test_character_system_comprehensive.py` ç­‰ï¼‰ã€‚éœ€è¦ä¸€æ¬¡æ€§å¤„ç†åæ‰èƒ½çœ‹åˆ° pytest è¦†ç›–ç‡ç»“æœã€‚
2. **CI workflow ç¼“å­˜é…ç½®**ï¼š`frontend-ci.yml` çš„ `cache` ä¸ `cache-dependency-path` åº”ä¸å®é™…é”æ–‡ä»¶ä¸€è‡´ï¼Œæˆ–åœ¨æœ¬åœ°ä»¿çœŸæ—¶å…³é—­ç¼“å­˜ï¼Œå¦åˆ™ `act` æ— æ³•è¶Šè¿‡ `setup-node`ã€‚
3. **Shared Types æ‰“åŒ…**ï¼š`src/core/types/shared_types.py` å°šæœªæ­£ç¡®æš´éœ²ç»™ tests runnerï¼›ä¿®å¤è¯¥åŒ…åŠ security/rate-limiter å›å½’åï¼Œ`act -W .github/workflows/ci.yml -j tests` æ‰èƒ½è½¬å‘çœŸæ­£çš„æµ‹è¯•å¤±è´¥ã€‚
4. **Extended UAT æ–­è¨€**ï¼š`tests/e2e/dashboard-extended-uat.spec.ts` ä»å‡è®¾çœŸå® API/å¤šè§’è‰²å‰§æƒ…ï¼Œéœ€è¦é’ˆå¯¹ mock æ•°æ®é™çº§æ–­è¨€ï¼Œæˆ–è¡¥å……æµ‹è¯•æ•°æ®ä¸ç«¯ç‚¹ã€‚

> ä»¥ä¸Šç»“æœå·²ç»é™„åŠ åˆ° `frontend/test-results/` ä¸ `tmp/*.log`ï¼Œå¯åœ¨ `docs/assets` ç›®å½•è¡¥å……æœ€æ–°æˆªå›¾åçº³å…¥æŠ¥å‘Šã€‚
