# ACT Configuration - GitHub Actions Local Testing
# Optimized for Novel-Engine CI/CD workflows
# See .claude/ACT_SETUP.md for detailed setup guide

# Use Ubuntu 22.04 image matching GitHub Actions ubuntu-latest
# This ensures maximum compatibility with remote CI environment
-P ubuntu-latest=catthehacker/ubuntu:act-22.04

# Container architecture matching GitHub Actions (x86_64/amd64)
--container-architecture linux/amd64

# Artifact server for test results and build outputs
# Matches GitHub Actions artifact upload functionality
--artifact-server-path ./act-artifacts

# Reuse containers between runs for faster iterations
# Significantly reduces startup time for repeated test runs
--reuse

# Use .gitignore for determining which files to copy
# Prevents copying unnecessary files into container
--use-gitignore

# Set GitHub instance URL for action downloads
# Required for downloading actions from GitHub marketplace
--github-instance https://github.com

# Load secrets from .env.local file
# Create this file with: echo "GITHUB_TOKEN=ghp_your_token" > .env.local
--secret-file .env.local

# Load environment variables from .env file
--env-file .env

# Use custom event payload for better simulation
# Create .act-event.json with repository-specific details
--eventpath .act-event.json

# Enable verbose output for debugging (comment out for quieter output)
# --verbose

# Bind mount workspace instead of copying (faster, but requires clean working directory)
# Uncomment for faster runs if your working directory is clean
# --bind

# Set container options for better resource management
# --container-options "--memory=8g --cpus=4"

# Use specific platform to avoid emulation overhead on ARM systems
# This is set to linux/amd64 to match GitHub Actions exactly
--platform linux/amd64

# Replace host networking with default Docker networking for better isolation
# --container-daemon-socket -
